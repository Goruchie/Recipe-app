<div>
  <h1>Recipe <%= @recipe.name %> </h1>
  <span>Cooking Time: <%= @recipe.cooking_time %> </span>
  <span>Preparation Time: <%= @recipe.preparation_time %> </span>
  <label for="checkbox">Public</label>

    <% if @recipe.public %>
  <%= button_to "Private", toggle_public_path(@recipe.id), method: :patch, class: "btn btn-danger shadow"  %>
  <% else %>
    <%= button_to "Public", toggle_public_path(@recipe.id), method: :patch, class: "btn btn-success shadow"  %>
  <% end %>
  <p>Description: <%= @recipe.description %> </p>
  <% if can? :create, @recipe %>
    <button>Generate shopping list</button>
    <button class="click_btn">Add ingredient</button>
  <% end %>
</div>
<div>
    <table>
  <tr>
    <th>Food</th>
    <th>Quantity</th>
    <th>Value</th>
    <th>Actions</th>
  </tr>
  <% @recipe_foods.each do |recipe_food| %>
    <tr>
      <td><%= recipe_food.foods.name%></td>
      <td><%= recipe_food.quantity%></td>
      <td><%= recipe_food.quantity * recipe_food.foods.price %>$</td>
      <td>


       
      <%# Not working yet %>
      <% if can? :edit, @recipe %>
        <%= button_to 'Modify', food_path(recipe_food.id), method: :delete, data: {turbo_method: :delete} %>
      <% end %>
      <% if can? :destroy, @recipe %>
        <%= button_to 'Delete', food_path(recipe_food.id), method: :delete, data: {turbo_method: :delete} %>
      <% end %>
      </td>
    </tr>
  <% end %>
</table>
</div>
<div class="modal">
  <div class="modal-content">
  <button class="close_btn">X</button>
  <div>
    <span>Select an ingredient:</span>
    <%= render 'recipes_food'%>
  </div>
</div>





<script>
  document.querySelector('.click_btn').addEventListener('click', (event) => {
    document.querySelector('.modal').style.visibility = 'visible'
    document.querySelector('#body').style.overflow = 'hidden'
  })

  document.querySelector('.close_btn').addEventListener('click', (event) => {
    document.querySelector('.modal').style.visibility = 'hidden'
    document.querySelector('#body').style.overflow = 'scroll'
  })

//   document.querySelectorAll('.modal-contents > div:first-of-type > span').forEach(element => {
//     element.addEventListener('click', () => {
//     document.querySelector('.recipe-modal').style.display = 'none'
//     document.querySelector('.shopping-modal').style.display = 'none'
//   })
// })
</script>